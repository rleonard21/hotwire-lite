EESchema Schematic File Version 4
EELAYER 30 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 1 1
Title ""
Date ""
Rev ""
Comp ""
Comment1 ""
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
$Comp
L MCU_Microchip_ATtiny:ATtiny402-SS U2
U 1 1 61F8B5AA
P 5150 2950
F 0 "U2" H 4621 2996 50  0000 R CNN
F 1 "ATtiny402-SS" H 4621 2905 50  0000 R CNN
F 2 "Package_SO:SOIC-8_3.9x4.9mm_P1.27mm" H 5150 2950 50  0001 C CIN
F 3 "http://ww1.microchip.com/downloads/en/DeviceDoc/ATtiny202-402-AVR-MCU-with-Core-Independent-Peripherals_and-picoPower-40001969A.pdf" H 5150 2950 50  0001 C CNN
	1    5150 2950
	1    0    0    -1  
$EndComp
$Comp
L Device:C_Small C2
U 1 1 61F8D340
P 3300 2250
F 0 "C2" H 3392 2296 50  0000 L CNN
F 1 "1uF" H 3392 2205 50  0000 L CNN
F 2 "Capacitor_SMD:C_0805_2012Metric" H 3300 2250 50  0001 C CNN
F 3 "~" H 3300 2250 50  0001 C CNN
	1    3300 2250
	1    0    0    -1  
$EndComp
$Comp
L power:GNDREF #PWR02
U 1 1 61F90ED0
P 2800 2550
F 0 "#PWR02" H 2800 2300 50  0001 C CNN
F 1 "GNDREF" H 2805 2377 50  0000 C CNN
F 2 "" H 2800 2550 50  0001 C CNN
F 3 "" H 2800 2550 50  0001 C CNN
	1    2800 2550
	1    0    0    -1  
$EndComp
$Comp
L Device:C_Small C1
U 1 1 61F9D699
P 2300 2250
F 0 "C1" H 2392 2296 50  0000 L CNN
F 1 "1uF" H 2392 2205 50  0000 L CNN
F 2 "Capacitor_SMD:C_0805_2012Metric" H 2300 2250 50  0001 C CNN
F 3 "~" H 2300 2250 50  0001 C CNN
	1    2300 2250
	1    0    0    -1  
$EndComp
Wire Wire Line
	5150 2050 5150 2350
$Comp
L power:GNDREF #PWR05
U 1 1 61FA36CC
P 5150 3700
F 0 "#PWR05" H 5150 3450 50  0001 C CNN
F 1 "GNDREF" H 5155 3527 50  0000 C CNN
F 2 "" H 5150 3700 50  0001 C CNN
F 3 "" H 5150 3700 50  0001 C CNN
	1    5150 3700
	1    0    0    -1  
$EndComp
Connection ~ 4400 2050
Wire Wire Line
	4400 2050 5150 2050
Wire Wire Line
	5150 3550 5150 3700
Wire Wire Line
	5150 2050 5900 2050
Connection ~ 5150 2050
Wire Wire Line
	5900 2350 5900 2650
Wire Wire Line
	5900 2650 5750 2650
Wire Wire Line
	5900 2050 5900 2150
$Comp
L Device:R_Small_US R5
U 1 1 61FA97A8
P 5900 2250
F 0 "R5" H 5968 2296 50  0000 L CNN
F 1 "10k" H 5968 2205 50  0000 L CNN
F 2 "Resistor_SMD:R_0805_2012Metric" H 5900 2250 50  0001 C CNN
F 3 "~" H 5900 2250 50  0001 C CNN
	1    5900 2250
	1    0    0    -1  
$EndComp
$Comp
L Connector:Barrel_Jack J1
U 1 1 61FAFD02
P 1450 2150
F 0 "J1" H 1507 2475 50  0000 C CNN
F 1 "Barrel_Jack" H 1507 2384 50  0000 C CNN
F 2 "Connector_BarrelJack:BarrelJack_CLIFF_FC681465S_SMT_Horizontal" H 1500 2110 50  0001 C CNN
F 3 "~" H 1500 2110 50  0001 C CNN
	1    1450 2150
	1    0    0    -1  
$EndComp
Wire Wire Line
	1750 2250 1950 2250
Wire Wire Line
	1950 2250 1950 2450
$Comp
L Transistor_FET:Si4162DY Q1
U 1 1 61FBC2EA
P 7800 3050
F 0 "Q1" H 8005 3096 50  0000 L CNN
F 1 "Si4162DY" H 8005 3005 50  0000 L CNN
F 2 "Package_SO:SOIC-8_3.9x4.9mm_P1.27mm" H 8000 2950 50  0001 L CNN
F 3 "http://www.vishay.com/docs/68967/si4162dy.pdf" H 7800 3050 50  0001 L CNN
	1    7800 3050
	1    0    0    -1  
$EndComp
Text Label 1850 2050 0    50   ~ 0
vin
$Comp
L power:GNDREF #PWR08
U 1 1 61FC14D4
P 7900 3500
F 0 "#PWR08" H 7900 3250 50  0001 C CNN
F 1 "GNDREF" H 7905 3327 50  0000 C CNN
F 2 "" H 7900 3500 50  0001 C CNN
F 3 "" H 7900 3500 50  0001 C CNN
	1    7900 3500
	1    0    0    -1  
$EndComp
Wire Wire Line
	7900 3500 7900 3250
$Comp
L Device:R_Small_US R7
U 1 1 61FC5936
P 7900 1900
F 0 "R7" H 7968 1946 50  0000 L CNN
F 1 "R_Small_US" H 7968 1855 50  0000 L CNN
F 2 "Resistor_SMD:R_2512_6332Metric" H 7900 1900 50  0001 C CNN
F 3 "~" H 7900 1900 50  0001 C CNN
	1    7900 1900
	1    0    0    -1  
$EndComp
Wire Wire Line
	7900 2000 7900 2050
$Comp
L Amplifier_Current:INA181 U3
U 1 1 61FC6B9C
P 9250 1900
F 0 "U3" H 9594 1946 50  0000 L CNN
F 1 "INA181" H 9594 1855 50  0000 L CNN
F 2 "Package_TO_SOT_SMD:SOT-23-6" H 9300 1950 50  0001 C CNN
F 3 "http://www.ti.com/lit/ds/symlink/ina181.pdf" H 9400 2050 50  0001 C CNN
	1    9250 1900
	1    0    0    -1  
$EndComp
Wire Wire Line
	7900 2050 8750 2050
Wire Wire Line
	8750 2050 8750 2000
Wire Wire Line
	8750 2000 8950 2000
Connection ~ 7900 2050
Wire Wire Line
	8950 1800 8750 1800
Wire Wire Line
	8750 1800 8750 1750
Wire Wire Line
	8750 1750 7900 1750
Wire Wire Line
	7900 1750 7900 1800
Text Label 7900 1650 0    50   ~ 0
vin
Wire Wire Line
	7900 1650 7900 1750
Connection ~ 7900 1750
$Comp
L power:GNDREF #PWR09
U 1 1 61FCC653
P 9150 2300
F 0 "#PWR09" H 9150 2050 50  0001 C CNN
F 1 "GNDREF" H 9155 2127 50  0000 C CNN
F 2 "" H 9150 2300 50  0001 C CNN
F 3 "" H 9150 2300 50  0001 C CNN
	1    9150 2300
	1    0    0    -1  
$EndComp
$Comp
L power:GNDREF #PWR010
U 1 1 61FCCE96
P 9350 2300
F 0 "#PWR010" H 9350 2050 50  0001 C CNN
F 1 "GNDREF" H 9355 2127 50  0000 C CNN
F 2 "" H 9350 2300 50  0001 C CNN
F 3 "" H 9350 2300 50  0001 C CNN
	1    9350 2300
	1    0    0    -1  
$EndComp
Text Label 3350 2050 0    50   ~ 0
vcc
Text Label 9150 1450 0    50   ~ 0
vcc
Wire Wire Line
	9150 1450 9150 1550
$Comp
L Device:C_Small C4
U 1 1 61FD6570
P 9600 1550
F 0 "C4" H 9692 1596 50  0000 L CNN
F 1 "0.1uF" H 9692 1505 50  0000 L CNN
F 2 "Capacitor_SMD:C_0805_2012Metric" H 9600 1550 50  0001 C CNN
F 3 "~" H 9600 1550 50  0001 C CNN
	1    9600 1550
	0    -1   -1   0   
$EndComp
$Comp
L power:GNDREF #PWR011
U 1 1 61FD6576
P 9850 1550
F 0 "#PWR011" H 9850 1300 50  0001 C CNN
F 1 "GNDREF" H 9855 1377 50  0000 C CNN
F 2 "" H 9850 1550 50  0001 C CNN
F 3 "" H 9850 1550 50  0001 C CNN
	1    9850 1550
	0    -1   -1   0   
$EndComp
Wire Wire Line
	9700 1550 9850 1550
Wire Wire Line
	9150 1550 9500 1550
Connection ~ 9150 1550
Wire Wire Line
	9150 1550 9150 1600
Wire Wire Line
	7500 3050 7550 3050
Text Label 9900 1900 0    50   ~ 0
current_sense
Wire Wire Line
	9900 1900 9800 1900
Wire Wire Line
	2300 3200 2300 3300
$Comp
L Device:R_Small_US R1
U 1 1 61FE23AA
P 2300 3400
F 0 "R1" H 2368 3446 50  0000 L CNN
F 1 "10k" H 2368 3355 50  0000 L CNN
F 2 "Resistor_SMD:R_0805_2012Metric" H 2300 3400 50  0001 C CNN
F 3 "~" H 2300 3400 50  0001 C CNN
	1    2300 3400
	1    0    0    -1  
$EndComp
$Comp
L Device:R_Small_US R2
U 1 1 61FE42C4
P 2300 3700
F 0 "R2" H 2368 3746 50  0000 L CNN
F 1 "10k" H 2368 3655 50  0000 L CNN
F 2 "Resistor_SMD:R_0805_2012Metric" H 2300 3700 50  0001 C CNN
F 3 "~" H 2300 3700 50  0001 C CNN
	1    2300 3700
	1    0    0    -1  
$EndComp
$Comp
L power:GNDREF #PWR01
U 1 1 61FEB60F
P 2300 4150
F 0 "#PWR01" H 2300 3900 50  0001 C CNN
F 1 "GNDREF" H 2305 3977 50  0000 C CNN
F 2 "" H 2300 4150 50  0001 C CNN
F 3 "" H 2300 4150 50  0001 C CNN
	1    2300 4150
	1    0    0    -1  
$EndComp
Text Label 2300 3200 0    50   ~ 0
shunt_low
Text Label 5900 3050 0    50   ~ 0
tx_led
Wire Wire Line
	5900 3050 5750 3050
Wire Wire Line
	5750 3150 5900 3150
Text Label 5900 2650 0    50   ~ 0
UPDI
Wire Notes Line
	2000 3050 2000 4350
Wire Notes Line
	2000 4350 3100 4350
Wire Notes Line
	3100 4350 3100 3050
Wire Notes Line
	3100 3000 2000 3000
$Comp
L power:GNDREF #PWR03
U 1 1 61FA3228
P 4400 2500
F 0 "#PWR03" H 4400 2250 50  0001 C CNN
F 1 "GNDREF" H 4405 2327 50  0000 C CNN
F 2 "" H 4400 2500 50  0001 C CNN
F 3 "" H 4400 2500 50  0001 C CNN
	1    4400 2500
	1    0    0    -1  
$EndComp
$Comp
L Device:C_Small C3
U 1 1 62065050
P 4400 2300
F 0 "C3" H 4492 2346 50  0000 L CNN
F 1 "0.1uF" H 4492 2255 50  0000 L CNN
F 2 "Capacitor_SMD:C_0805_2012Metric" H 4400 2300 50  0001 C CNN
F 3 "~" H 4400 2300 50  0001 C CNN
	1    4400 2300
	1    0    0    -1  
$EndComp
Wire Wire Line
	4400 2050 4400 2200
Wire Wire Line
	4400 2400 4400 2500
Wire Wire Line
	2800 2550 2800 2450
Connection ~ 2800 2450
Wire Wire Line
	2800 2350 2800 2450
Wire Wire Line
	9150 2200 9150 2300
Wire Wire Line
	9350 2200 9350 2300
Text Label 5900 2750 0    50   ~ 0
pwm_output
Wire Wire Line
	5900 2750 5750 2750
Text Label 5900 2950 0    50   ~ 0
current_sense
Text Label 5900 2850 0    50   ~ 0
voltage_sense
Wire Wire Line
	5750 2850 5900 2850
Wire Wire Line
	5750 2950 5900 2950
$Comp
L Connector:TestPoint TP2
U 1 1 61FA1C8A
P 2300 1900
F 0 "TP2" H 2358 2018 50  0000 L CNN
F 1 "vin" H 2358 1927 50  0000 L CNN
F 2 "TestPoint:TestPoint_Pad_D1.0mm" H 2500 1900 50  0001 C CNN
F 3 "~" H 2500 1900 50  0001 C CNN
	1    2300 1900
	1    0    0    -1  
$EndComp
$Comp
L Connector:TestPoint TP3
U 1 1 61FA2EC8
P 3300 1900
F 0 "TP3" H 3358 2018 50  0000 L CNN
F 1 "reg" H 3358 1927 50  0000 L CNN
F 2 "TestPoint:TestPoint_Pad_D1.0mm" H 3500 1900 50  0001 C CNN
F 3 "~" H 3500 1900 50  0001 C CNN
	1    3300 1900
	1    0    0    -1  
$EndComp
$Comp
L Connector:TestPoint TP5
U 1 1 61FA4F98
P 9800 2100
F 0 "TP5" H 9742 2126 50  0000 R CNN
F 1 "amp" H 9742 2217 50  0000 R CNN
F 2 "TestPoint:TestPoint_Pad_D1.0mm" H 10000 2100 50  0001 C CNN
F 3 "~" H 10000 2100 50  0001 C CNN
	1    9800 2100
	-1   0    0    1   
$EndComp
$Comp
L Connector:TestPoint TP4
U 1 1 61FA6F0F
P 7550 2900
F 0 "TP4" H 7608 3018 50  0000 L CNN
F 1 "pwm" H 7608 2927 50  0000 L CNN
F 2 "TestPoint:TestPoint_Pad_D1.0mm" H 7750 2900 50  0001 C CNN
F 3 "~" H 7750 2900 50  0001 C CNN
	1    7550 2900
	1    0    0    -1  
$EndComp
$Comp
L Connector:TestPoint TP1
U 1 1 61FA928F
P 2200 3850
F 0 "TP1" V 2395 3922 50  0000 C CNN
F 1 "volt" V 2304 3922 50  0000 C CNN
F 2 "TestPoint:TestPoint_Pad_D1.0mm" H 2400 3850 50  0001 C CNN
F 3 "~" H 2400 3850 50  0001 C CNN
	1    2200 3850
	0    -1   -1   0   
$EndComp
Wire Wire Line
	9800 2100 9800 1900
Connection ~ 9800 1900
Wire Wire Line
	9800 1900 9550 1900
Wire Wire Line
	7550 2900 7550 3050
Connection ~ 7550 3050
Wire Wire Line
	7550 3050 7600 3050
$Comp
L Device:LED D1
U 1 1 61FA3AE9
P 4600 4350
F 0 "D1" V 4639 4232 50  0000 R CNN
F 1 "LED" V 4548 4232 50  0000 R CNN
F 2 "LED_SMD:LED_0805_2012Metric" H 4600 4350 50  0001 C CNN
F 3 "~" H 4600 4350 50  0001 C CNN
	1    4600 4350
	0    -1   -1   0   
$EndComp
$Comp
L Device:R_Small_US R4
U 1 1 61FA52F2
P 4600 4750
F 0 "R4" H 4668 4796 50  0000 L CNN
F 1 "220" H 4668 4705 50  0000 L CNN
F 2 "Resistor_SMD:R_0805_2012Metric" H 4600 4750 50  0001 C CNN
F 3 "~" H 4600 4750 50  0001 C CNN
	1    4600 4750
	1    0    0    -1  
$EndComp
$Comp
L power:GNDREF #PWR07
U 1 1 61FB209B
P 7050 4850
F 0 "#PWR07" H 7050 4600 50  0001 C CNN
F 1 "GNDREF" H 7055 4677 50  0000 C CNN
F 2 "" H 7050 4850 50  0001 C CNN
F 3 "" H 7050 4850 50  0001 C CNN
	1    7050 4850
	1    0    0    -1  
$EndComp
$Comp
L power:GNDREF #PWR04
U 1 1 61FB3571
P 4600 4950
F 0 "#PWR04" H 4600 4700 50  0001 C CNN
F 1 "GNDREF" H 4605 4777 50  0000 C CNN
F 2 "" H 4600 4950 50  0001 C CNN
F 3 "" H 4600 4950 50  0001 C CNN
	1    4600 4950
	1    0    0    -1  
$EndComp
Wire Wire Line
	6800 4650 7050 4650
Text Label 6100 4650 2    50   ~ 0
rx_button
Text Label 5900 3150 0    50   ~ 0
rx_button
Wire Wire Line
	4600 4950 4600 4850
Text Label 4600 4100 2    50   ~ 0
tx_led
Wire Wire Line
	4600 4500 4600 4650
Wire Wire Line
	4600 4100 4600 4200
$Comp
L Connector_Generic:Conn_01x04 J3
U 1 1 61FE84AE
P 6150 5800
F 0 "J3" H 6230 5792 50  0000 L CNN
F 1 "Conn_01x04" H 6230 5701 50  0000 L CNN
F 2 "Connector_PinHeader_2.54mm:PinHeader_1x04_P2.54mm_Vertical" H 6150 5800 50  0001 C CNN
F 3 "~" H 6150 5800 50  0001 C CNN
	1    6150 5800
	-1   0    0    1   
$EndComp
$Comp
L Connector:Screw_Terminal_01x02 J2
U 1 1 61FF9D1B
P 1600 2650
F 0 "J2" H 1518 2325 50  0000 C CNN
F 1 "Screw_Terminal_01x02" H 1518 2416 50  0000 C CNN
F 2 "TerminalBlock_4Ucon:TerminalBlock_4Ucon_1x02_P3.50mm_Horizontal" H 1600 2650 50  0001 C CNN
F 3 "~" H 1600 2650 50  0001 C CNN
	1    1600 2650
	-1   0    0    1   
$EndComp
Wire Wire Line
	1800 2550 1850 2550
Wire Wire Line
	1850 2550 1850 2050
Connection ~ 1850 2050
Wire Wire Line
	1850 2050 1750 2050
Wire Wire Line
	1800 2650 1950 2650
Wire Wire Line
	1950 2650 1950 2450
Connection ~ 1950 2450
Wire Wire Line
	1850 2050 2300 2050
Wire Wire Line
	1950 2450 2300 2450
Wire Wire Line
	2300 2350 2300 2450
Connection ~ 2300 2450
Wire Wire Line
	2300 2450 2800 2450
Wire Wire Line
	2300 2050 2300 1900
Connection ~ 2300 2050
Wire Wire Line
	2300 2050 2500 2050
Wire Wire Line
	2300 2150 2300 2050
Wire Wire Line
	3100 2050 3300 2050
Wire Wire Line
	3300 2450 3300 2350
Wire Wire Line
	2800 2450 3300 2450
Wire Wire Line
	3300 2150 3300 2050
Connection ~ 3300 2050
Wire Wire Line
	3300 2050 4400 2050
Wire Wire Line
	3300 2050 3300 1900
$Comp
L Connector_Generic:Conn_01x02 J4
U 1 1 6204FD0C
P 8150 2550
F 0 "J4" H 8230 2542 50  0000 L CNN
F 1 "Conn_01x02" H 8230 2451 50  0000 L CNN
F 2 "Connector_PinHeader_2.54mm:PinHeader_1x02_P2.54mm_Vertical" H 8150 2550 50  0001 C CNN
F 3 "~" H 8150 2550 50  0001 C CNN
	1    8150 2550
	1    0    0    -1  
$EndComp
Wire Wire Line
	7950 2550 7900 2550
Wire Wire Line
	7900 2050 7900 2550
Wire Wire Line
	7950 2650 7900 2650
Wire Wire Line
	7900 2650 7900 2850
$Comp
L Regulator_Linear:AP1117-50 U1
U 1 1 62085323
P 2800 2050
F 0 "U1" H 2800 2292 50  0000 C CNN
F 1 "AP1117-50" H 2800 2201 50  0000 C CNN
F 2 "Package_TO_SOT_SMD:SOT-223-3_TabPin2" H 2800 2250 50  0001 C CNN
F 3 "http://www.diodes.com/datasheets/AP1117.pdf" H 2900 1800 50  0001 C CNN
	1    2800 2050
	1    0    0    -1  
$EndComp
$Comp
L Switch:SW_Push SW1
U 1 1 6208A8D0
P 6600 4650
F 0 "SW1" H 6600 4935 50  0000 C CNN
F 1 "SW_Push" H 6600 4844 50  0000 C CNN
F 2 "Button_Switch_SMD:SW_SPST_PTS645" H 6600 4850 50  0001 C CNN
F 3 "~" H 6600 4850 50  0001 C CNN
	1    6600 4650
	1    0    0    -1  
$EndComp
Wire Wire Line
	6100 4650 6400 4650
Wire Wire Line
	7050 4650 7050 4850
Text Label 7900 2800 0    50   ~ 0
output_return
$Comp
L Device:R_Small_US R6
U 1 1 62003222
P 7400 3050
F 0 "R6" H 7468 3096 50  0000 L CNN
F 1 "220" H 7468 3005 50  0000 L CNN
F 2 "Resistor_SMD:R_0805_2012Metric" H 7400 3050 50  0001 C CNN
F 3 "~" H 7400 3050 50  0001 C CNN
	1    7400 3050
	0    -1   -1   0   
$EndComp
Text Label 7100 3050 2    50   ~ 0
pwm_output
Wire Wire Line
	7100 3050 7300 3050
Text Label 2550 3850 0    50   ~ 0
voltage_sense
$Comp
L Device:R_Small_US R3
U 1 1 620365FA
P 2300 4000
F 0 "R3" H 2368 4046 50  0000 L CNN
F 1 "10k" H 2368 3955 50  0000 L CNN
F 2 "Resistor_SMD:R_0805_2012Metric" H 2300 4000 50  0001 C CNN
F 3 "~" H 2300 4000 50  0001 C CNN
	1    2300 4000
	1    0    0    -1  
$EndComp
Wire Wire Line
	2300 4150 2300 4100
Wire Wire Line
	6500 5900 6500 5950
$Comp
L power:GNDREF #PWR06
U 1 1 61FEB83F
P 6500 5950
F 0 "#PWR06" H 6500 5700 50  0001 C CNN
F 1 "GNDREF" H 6505 5777 50  0000 C CNN
F 2 "" H 6500 5950 50  0001 C CNN
F 3 "" H 6500 5950 50  0001 C CNN
	1    6500 5950
	1    0    0    -1  
$EndComp
Text Label 6500 5800 0    50   ~ 0
tx_led
Text Label 6500 5700 0    50   ~ 0
rx_button
Text Label 6500 5600 0    50   ~ 0
UPDI
Wire Wire Line
	6500 5900 6350 5900
Wire Wire Line
	6500 5600 6350 5600
Wire Wire Line
	6350 5700 6500 5700
Wire Wire Line
	6350 5800 6500 5800
Wire Wire Line
	2300 3800 2300 3850
Wire Wire Line
	2200 3850 2300 3850
Connection ~ 2300 3850
Wire Wire Line
	2300 3850 2300 3900
Wire Wire Line
	2550 3850 2300 3850
Wire Wire Line
	2300 3500 2300 3600
Text Label 7900 2350 2    50   ~ 0
shunt_low
$EndSCHEMATC
